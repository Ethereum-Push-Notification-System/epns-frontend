# ChatViewBubble

Allows developers to add message bubble Ui in their dapp

<head>
  <title>UiWeb - ChatViewBubble</title>
</head>

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";
import { ModalContainer } from "@site/src/components/SharedStylingV2";


<Tabs className="codetabs" groupId="code-examples">
<TabItem value="js" attributes={{className: "codetab js"}} default>

Example:
<ModalContainer>
  <img src={require("/static/img/uiweb/chatbubble.png").default} />
</ModalContainer>

```typescript
import { ChatViewBubble } from "@pushprotocol/uiweb";
import { useEffect, useContext, useState } from "react";
import { EnvContext, Web3Context } from "../context";
import * as PUSHAPI from "@pushprotocol/restapi";
import { ENV } from "@pushprotocol/uiweb";
import { IMessagePayload } from "@pushprotocol/uiweb";

export const ChatViewBubbles = () => {
  const { env } = useContext<any>(EnvContext);

  const { library, account } = useContext<any>(Web3Context);
  const [message, setMessage] = useState<IMessagePayload[]>([]);
  const [conversationHash, setConversationHash] = useState<string>("");

  const librarySigner = library.getSigner();

  const fetchMessage = async () => {
    const user = await PUSHAPI.user.get({
      account: account,
    });
    const pgpPrivateKey = await PUSHAPI.chat.decryptPGPKey({
      encryptedPGPPrivateKey: user.encryptedPrivateKey,
      signer: librarySigner,
      env: env,
    });

    const ConversationHash = await PUSHAPI.chat.conversationHash({
      account: `eip155:${account}`,
      conversationId:
        "196f58cbe07c7eb5716d939e0a3be1f15b22b2334d5179c601566600016860ac",
      env: env,
    });
    setConversationHash(ConversationHash.threadHash);
    if (ConversationHash?.threadHash) {
      const chatHistory = await PUSHAPI.chat.history({
        threadhash: conversationHash,
        account: account,
        limit: 10,
        toDecrypt: true,
        pgpPrivateKey: pgpPrivateKey ? pgpPrivateKey : undefined,
        env: env,
      });
      setMessage(chatHistory);
      console.log(chatHistory);
    }
  };

  useEffect(() => {
    fetchMessage();
  }, []);

  return (
    <div>
      {message.map((msg) => (
        <ChatViewBubble chat={msg} />
      ))}
    </div>
  );
};
```

</TabItem>
</Tabs>

---

| Param                       | Type            | Default |
| --------------------------- | --------------- | ------- |
| _`decryptedMessagePayload`_ | IMessagePayload | -       |

> Note: Parameters _`in this style`_ are mandatory.
